<view class="container">
    <!-- 页面头部 -->
    <view class="header">
        <!-- 返回按钮 -->
        <view class="header-top">
            <view class="back-btn" bindtap="goBack" hover-class="back-btn-hover">
                <van-icon name="arrow-left" size="36rpx" color="#FFFFFF"/>
                <text class="back-text">返回</text>
            </view>
        </view>

        <view class="header-bg">
            <view class="header-decoration">
                <view class="decoration-circle circle-1"></view>
                <view class="decoration-circle circle-2"></view>
                <view class="decoration-circle circle-3"></view>
            </view>
        </view>
        <view class="header-content">
            <text class="title">服务地图</text>
            <text class="subtitle">上地街道分布查询</text>
        </view>
    </view>

    <!-- 内容区域 -->
    <view class="content">
        <!-- 社区列表 -->
        <view wx:for="{{communities}}" wx:key="id" class="community-section">
            <!-- 社区一级标题（可展开） -->
            <view class="community-header" bindtap="toggleCommunity" data-index="{{index}}">
                <view class="header-left">
                    <van-icon name="location-o" size="32rpx" color="#FFFFFF"/>
                    <text class="community-name">{{item.name}}</text>
                </view>
                <view class="expand-icon">
                    <van-icon name="{{item.expanded ? 'arrow-down' : 'arrow'}}" size="28rpx" color="#FFFFFF"/>
                </view>
            </view>

            <!-- 类别列表（社区展开时显示） -->
            <view wx:if="{{item.expanded}}" class="categories-list">
                <view wx:for="{{item.categories}}" wx:for-item="category" wx:for-index="catIndex" wx:key="id" class="category-item">
                    <!-- 类别二级标题（可展开） -->
                    <view class="category-header" bindtap="toggleCategory" data-community-index="{{index}}" data-category-index="{{catIndex}}">
                        <view class="header-left">
                            <van-icon name="shop-o" size="28rpx" color="#FF6B35"/>
                            <text class="category-name">{{category.name}}</text>
                        </view>
                        <view class="expand-icon">
                            <van-icon name="{{category.expanded ? 'arrow-down' : 'arrow'}}" size="24rpx" color="#FF6B35"/>
                        </view>
                    </view>

                    <!-- 店铺列表（类别展开时显示） -->
                    <view wx:if="{{category.expanded}}" class="shops-list">
                        <view wx:for="{{category.shops}}" wx:for-item="shop" wx:for-index="shopIndex" wx:key="shopIndex" class="shop-card">
                            <!-- 店铺名称 -->
                            <view class="shop-name">{{shop.name}}</view>
                            
                            <!-- 店铺信息行 -->
                            <view class="shop-info-row">
                                <view class="info-label">地址：</view>
                                <view class="info-content">{{shop.address}}</view>
                            </view>

                            <view class="shop-info-row">
                                <view class="info-label">电话：</view>
                                <view class="info-content">{{shop.phone}}</view>
                            </view>

                            <view class="shop-info-row">
                                <view class="info-label">营业时间：</view>
                                <view class="info-content">{{shop.hours}}</view>
                            </view>
                        </view>
                    </view>
                </view>
            </view>
        </view>
    </view>
</view>
