<view class="container">
    <!-- 页面头部 -->
    <view class="header">
        <view class="header-bg">
            <view class="header-decoration">
                <view class="decoration-circle circle-1"></view>
                <view class="decoration-circle circle-2"></view>
                <view class="decoration-circle circle-3"></view>
            </view>
        </view>
        <view class="header-content">
            <view class="nav-bar">
                <view class="back-btn" bindtap="goBack">
                    <van-icon name="arrow-left" size="36rpx" color="#FFFFFF"/>
                </view>
                <view class="title-section">
                    <text class="title">健康指导</text>
                    <text class="subtitle">守护您的健康生活</text>
                </view>
            </view>
        </view>
    </view>

    <!-- 健康指导内容 -->
    <view class="content">
        <!-- 心肺复苏指导 -->
        <view class="cpr-section">
            <view class="section-header">
                <van-icon name="heart-o" size="32rpx" color="#FF6B35"/>
                <text class="section-title">心肺复苏指导</text>
            </view>
            <view class="cpr-grid">
                <view wx:for="{{cprImages}}" wx:key="id" class="cpr-card" bindtap="viewCPRImage" data-image="{{item.image}}" data-title="{{item.title}}">
                    <view class="cpr-image-container">
                        <image src="{{item.image}}" class="cpr-image" mode="aspectFit" />
                    </view>
                    <view class="cpr-info">
                        <text class="cpr-title">{{item.title}}</text>
                        <text class="cpr-desc">{{item.desc}}</text>
                    </view>
                </view>
            </view>
        </view>

        <!-- 阿尔茨海默症科普与预防 -->
        <view class="alzheimer-section">
            <view class="section-header">
                <van-icon name="orders-o" size="32rpx" color="#FF6B35"/>
                <text class="section-title">阿尔茨海默症的科普与预防</text>
            </view>
            <view class="alzheimer-card" bindtap="viewAlzheimerSlides">
                <view class="alzheimer-icon">
                    <van-icon name="description" size="60rpx" color="#FF6B35"/>
                </view>
                <view class="alzheimer-info">
                    <text class="alzheimer-title">阿尔茨海默症科普与预防指南</text>
                    <text class="alzheimer-desc">包含24页详细的科普内容和预防建议</text>
                    <view class="alzheimer-meta">
                        <text class="meta-text">共{{alzheimerData.totalSlides}}页</text>
                        <van-icon name="arrow" size="24rpx" color="#FF6B35"/>
                    </view>
                </view>
            </view>
        </view>
    </view>

    <!-- 心肺复苏图片预览 -->
    <view class="image-viewer" wx:if="{{showImageViewer}}" bindtap="closeImageViewer">
        <image
            src="{{currentImage}}"
            class="viewer-image"
            mode="aspectFit"
            style="transform: scale({{scale}}) translate({{translateX}}px, {{translateY}}px);"
            catchtap="preventClose"
            bindtouchstart="onTouchStart"
            bindtouchmove="onTouchMove"
            bindtouchend="onTouchEnd"
        />
        <view class="viewer-title">{{currentImageTitle}}</view>
        <view class="zoom-controls" catchtap="preventClose">
            <button class="zoom-btn zoom-out" catchtap="zoomOut">-</button>
            <text class="zoom-text">{{zoomPercent}}%</text>
            <button class="zoom-btn zoom-in" catchtap="zoomIn">+</button>
        </view>
    </view>

    <!-- 阿尔茨海默症幻灯片预览 -->
    <view class="alzheimer-viewer" wx:if="{{showAlzheimerViewer}}" bindtap="closeAlzheimerViewer">
        <view class="alzheimer-viewer-header">
            <view class="back-btn" bindtap="closeAlzheimerViewer" hover-class="back-btn-hover">
                <van-icon name="arrow-left" size="36rpx" color="#FFFFFF"/>
                <text class="back-text">返回</text>
            </view>
            <view class="viewer-title-section">
                <text class="viewer-title">{{alzheimerData.title}}</text>
                <text class="viewer-page-info">{{alzheimerCurrentSlide}}/{{alzheimerData.totalSlides}}</text>
            </view>
        </view>

        <view class="alzheimer-viewer-content">
            <image
                src="{{alzheimerData.slides[alzheimerCurrentSlide-1].image}}"
                class="alzheimer-image"
                mode="aspectFit"
                style="transform: scale({{alzheimerScale}}) translate({{translateX}}px, {{translateY}}px);"
                catchtap="preventClose"
                bindtouchstart="onTouchStart"
                bindtouchmove="onTouchMove"
                bindtouchend="onTouchEnd"
            />
        </view>

        <view class="alzheimer-controls" catchtap="preventClose">
            <button class="nav-btn prev-btn" catchtap="prevSlide" disabled="{{alzheimerCurrentSlide <= 1}}">
                <van-icon name="arrow-left" size="32rpx" color="{{alzheimerCurrentSlide <= 1 ? '#ccc' : '#FF6B35'}}"/>
            </button>
            <view class="zoom-controls">
                <button class="zoom-btn zoom-out" catchtap="alzheimerZoomOut">-</button>
                <text class="zoom-text">{{alzheimerZoomPercent}}%</text>
                <button class="zoom-btn zoom-in" catchtap="alzheimerZoomIn">+</button>
            </view>
            <button class="nav-btn next-btn" catchtap="nextSlide" disabled="{{alzheimerCurrentSlide >= alzheimerData.totalSlides}}">
                <van-icon name="arrow" size="32rpx" color="{{alzheimerCurrentSlide >= alzheimerData.totalSlides ? '#ccc' : '#FF6B35'}}"/>
            </button>
        </view>
    </view>
</view>
